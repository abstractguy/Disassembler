// instruction_management.c
#include "instruction_management.h"

static instruction_type instructions[256] {
  ONE_BYTE_INSTRUCTION,
  ADDR_11,
  ADDR_16,
  ONE_BYTE_INSTRUCTION,
  ONE_BYTE_INSTRUCTION,
  DIRECT,
  ONE_BYTE_INSTRUCTION,
  ONE_BYTE_INSTRUCTION,
  ONE_BYTE_INSTRUCTION,
  ONE_BYTE_INSTRUCTION,
  ONE_BYTE_INSTRUCTION,
  ONE_BYTE_INSTRUCTION,
  ONE_BYTE_INSTRUCTION,
  ONE_BYTE_INSTRUCTION,
  ONE_BYTE_INSTRUCTION,
  ONE_BYTE_INSTRUCTION,
  BIT_OFFSET,
  ADDR_11,
  ADDR_16,
  ONE_BYTE_INSTRUCTION,
  ONE_BYTE_INSTRUCTION,
  DIRECT,
  ONE_BYTE_INSTRUCTION,
  ONE_BYTE_INSTRUCTION,
  ONE_BYTE_INSTRUCTION,
  ONE_BYTE_INSTRUCTION,
  ONE_BYTE_INSTRUCTION,
  ONE_BYTE_INSTRUCTION,
  ONE_BYTE_INSTRUCTION,
  ONE_BYTE_INSTRUCTION,
  ONE_BYTE_INSTRUCTION,
  ONE_BYTE_INSTRUCTION,
  BIT_OFFSET,
  ADDR_11,
  ONE_BYTE_INSTRUCTION,
  ONE_BYTE_INSTRUCTION,
  IMMEDIATE,
  DIRECT,
  ONE_BYTE_INSTRUCTION,
  ONE_BYTE_INSTRUCTION,
  ONE_BYTE_INSTRUCTION,
  ONE_BYTE_INSTRUCTION,
  ONE_BYTE_INSTRUCTION,
  ONE_BYTE_INSTRUCTION,
  ONE_BYTE_INSTRUCTION,
  ONE_BYTE_INSTRUCTION,
  ONE_BYTE_INSTRUCTION,
  ONE_BYTE_INSTRUCTION,
  BIT_OFFSET,
  ADDR_11,
  ONE_BYTE_INSTRUCTION,
  ONE_BYTE_INSTRUCTION,
  IMMEDIATE,
  DIRECT,
  ONE_BYTE_INSTRUCTION,
  ONE_BYTE_INSTRUCTION,
  ONE_BYTE_INSTRUCTION,
  ONE_BYTE_INSTRUCTION,
  ONE_BYTE_INSTRUCTION,
  ONE_BYTE_INSTRUCTION,
  ONE_BYTE_INSTRUCTION,
  ONE_BYTE_INSTRUCTION,
  ONE_BYTE_INSTRUCTION,
  ONE_BYTE_INSTRUCTION,
  OFFSET,
  ADDR_11,
  DIRECT,
  DIRECT_IMMEDIATE,
  IMMEDIATE,
  DIRECT,
  ONE_BYTE_INSTRUCTION,
  ONE_BYTE_INSTRUCTION,
  ONE_BYTE_INSTRUCTION,
  ONE_BYTE_INSTRUCTION,
  ONE_BYTE_INSTRUCTION,
  ONE_BYTE_INSTRUCTION,
  ONE_BYTE_INSTRUCTION,
  ONE_BYTE_INSTRUCTION,
  ONE_BYTE_INSTRUCTION,
  ONE_BYTE_INSTRUCTION,
  OFFSET,
  ADDR_11,
  DIRECT,
  DIRECT_IMMEDIATE,
  IMMEDIATE,
  DIRECT,
  ONE_BYTE_INSTRUCTION,
  ONE_BYTE_INSTRUCTION,
  ONE_BYTE_INSTRUCTION,
  ONE_BYTE_INSTRUCTION,
  ONE_BYTE_INSTRUCTION,
  ONE_BYTE_INSTRUCTION,
  ONE_BYTE_INSTRUCTION,
  ONE_BYTE_INSTRUCTION,
  ONE_BYTE_INSTRUCTION,
  ONE_BYTE_INSTRUCTION,
  OFFSET,
  ADDR_11,
  DIRECT,
  DIRECT_IMMEDIATE,
  IMMEDIATE,
  DIRECT,
  ONE_BYTE_INSTRUCTION,
  ONE_BYTE_INSTRUCTION,
  ONE_BYTE_INSTRUCTION,
  ONE_BYTE_INSTRUCTION,
  ONE_BYTE_INSTRUCTION,
  ONE_BYTE_INSTRUCTION,
  ONE_BYTE_INSTRUCTION,
  ONE_BYTE_INSTRUCTION,
  ONE_BYTE_INSTRUCTION,
  ONE_BYTE_INSTRUCTION,
  OFFSET,
  ADDR_11,
  BIT,
  ONE_BYTE_INSTRUCTION,
  IMMEDIATE,
  DIRECT_IMMEDIATE,
  IMMEDIATE,
  IMMEDIATE,
  IMMEDIATE,
  IMMEDIATE,
  IMMEDIATE,
  IMMEDIATE,
  IMMEDIATE,
  IMMEDIATE,
  IMMEDIATE,
  IMMEDIATE,
  OFFSET,
  ADDR_11,
  BIT,
  ONE_BYTE_INSTRUCTION,
  ONE_BYTE_INSTRUCTION,
  DIRECT_DIRECT,
  DIRECT,
  DIRECT,
  DIRECT,
  DIRECT,
  DIRECT,
  DIRECT,
  DIRECT,
  DIRECT,
  DIRECT,
  DIRECT,
  IMMEDIATE_16,
  ADDR_11,
  BIT,
  ONE_BYTE_INSTRUCTION,
  IMMEDIATE,
  DIRECT,
  ONE_BYTE_INSTRUCTION,
  ONE_BYTE_INSTRUCTION,
  ONE_BYTE_INSTRUCTION,
  ONE_BYTE_INSTRUCTION,
  ONE_BYTE_INSTRUCTION,
  ONE_BYTE_INSTRUCTION,
  ONE_BYTE_INSTRUCTION,
  ONE_BYTE_INSTRUCTION,
  ONE_BYTE_INSTRUCTION,
  ONE_BYTE_INSTRUCTION,
  NOT_BIT,
  ADDR_11,
  BIT,
  ONE_BYTE_INSTRUCTION,
  ONE_BYTE_INSTRUCTION,
  ONE_BYTE_INSTRUCTION,
  DIRECT,
  DIRECT,
  DIRECT,
  DIRECT,
  DIRECT,
  DIRECT,
  DIRECT,
  DIRECT,
  DIRECT,
  DIRECT,
  NOT_BIT,
  ADDR_11,
  BIT,
  ONE_BYTE_INSTRUCTION,
  IMMEDIATE_OFFSET,
  DIRECT_OFFSET,
  IMMEDIATE_OFFSET,
  IMMEDIATE_OFFSET,
  IMMEDIATE_OFFSET,
  IMMEDIATE_OFFSET,
  IMMEDIATE_OFFSET,
  IMMEDIATE_OFFSET,
  IMMEDIATE_OFFSET,
  IMMEDIATE_OFFSET,
  IMMEDIATE_OFFSET,
  IMMEDIATE_OFFSET,
  DIRECT,
  ADDR_11,
  BIT,
  ONE_BYTE_INSTRUCTION,
  ONE_BYTE_INSTRUCTION,
  DIRECT,
  ONE_BYTE_INSTRUCTION,
  ONE_BYTE_INSTRUCTION,
  ONE_BYTE_INSTRUCTION,
  ONE_BYTE_INSTRUCTION,
  ONE_BYTE_INSTRUCTION,
  ONE_BYTE_INSTRUCTION,
  ONE_BYTE_INSTRUCTION,
  ONE_BYTE_INSTRUCTION,
  ONE_BYTE_INSTRUCTION,
  ONE_BYTE_INSTRUCTION,
  DIRECT,
  ADDR_11,
  BIT,
  ONE_BYTE_INSTRUCTION,
  ONE_BYTE_INSTRUCTION,
  DIRECT_OFFSET,
  ONE_BYTE_INSTRUCTION,
  ONE_BYTE_INSTRUCTION,
  OFFSET,
  OFFSET,
  OFFSET,
  OFFSET,
  OFFSET,
  OFFSET,
  OFFSET,
  OFFSET,
  ONE_BYTE_INSTRUCTION,
  ADDR_11,
  ONE_BYTE_INSTRUCTION,
  ONE_BYTE_INSTRUCTION,
  ONE_BYTE_INSTRUCTION,
  DIRECT,
  ONE_BYTE_INSTRUCTION,
  ONE_BYTE_INSTRUCTION,
  ONE_BYTE_INSTRUCTION,
  ONE_BYTE_INSTRUCTION,
  ONE_BYTE_INSTRUCTION,
  ONE_BYTE_INSTRUCTION,
  ONE_BYTE_INSTRUCTION,
  ONE_BYTE_INSTRUCTION,
  ONE_BYTE_INSTRUCTION,
  ONE_BYTE_INSTRUCTION,
  ONE_BYTE_INSTRUCTION,
  ADDR_11,
  ONE_BYTE_INSTRUCTION,
  ONE_BYTE_INSTRUCTION,
  ONE_BYTE_INSTRUCTION,
  DIRECT,
  ONE_BYTE_INSTRUCTION,
  ONE_BYTE_INSTRUCTION,
  ONE_BYTE_INSTRUCTION,
  ONE_BYTE_INSTRUCTION,
  ONE_BYTE_INSTRUCTION,
  ONE_BYTE_INSTRUCTION,
  ONE_BYTE_INSTRUCTION,
  ONE_BYTE_INSTRUCTION,
  ONE_BYTE_INSTRUCTION,
  ONE_BYTE_INSTRUCTION
};

instruction_type instruction_type_from_record(record *record) {
  return instructions[record->bytecode[0]];
}

unsigned char instruction_size(record *record) {
  switch (instruction_type_from_record(record)) {
    case ONE_BYTE_INSTRUCTION: return 1;
    case ADDR_11:
    case DIRECT:
    case IMMEDIATE:
    case OFFSET:
    case BIT:
    case NOT_BIT: return 2;
    case ADDR_16:
    case IMMEDIATE_16:
    case BIT_OFFSET:
    case DIRECT_IMMEDIATE:
    case DIRECT_DIRECT:
    case IMMEDIATE_OFFSET:
    case DIRECT_OFFSET: return 3;
  }
}
